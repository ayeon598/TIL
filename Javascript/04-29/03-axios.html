<!-- axios.html -->

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>


<!-- AJAX의 주된 목적은 "새로고침 없이 비동기적으로 서버와 통신하기 위해서" 입니다. -->
<!-- Axios는 AJAX를 쉽게 사용하게 해주는 '라이브러리'입니다 -->
<body>
  <!-- axios 사용할 수 있는 2가지 방법 -->
  <!-- 1. CDN 2. npm 라이브러리 설치  -->

  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script>
    // 1. Promise객체를 변수에 저장
    const promiseObj = axios({
      method: 'get',  // HTTP 메서드(get, post, put, delete)
      url: 'https://api.thecatapi.com/v1/images/search'
    })

    console.log(promiseObj) // Promise object

    //  Promise 객체를 가져오고, 처리하는 방법 then, catch
    // .then() : 요청이 성공했을 때
    // .catch() : 요청이 실패했을 때

    promiseObj
      .then((response) => {
        console.log(response)
        console.log(response.data)
      })
      .catch((error) => {
        console.log(error)
      })

      console.log('안녕하세요')
      // 1. console.log('안녕하세요') ---> 즉시 실행(비동기 통신)
      // 2. console.log(response) ---> 서버에 요청(get)보내고 응답이 도착했을 때 그 후 실행

    // 2. 변수 선언없에 Promise 객체를 바로 처리

    axios({
      method : 'get',
      url: 'https://api.thecatapi.com/v1/images/search'
    })
      .then((response) => {
        console.log(response)
        console.log(response.data)
      })
      .catch((error) => {
        console.log(error)
      })

    // 결론 : 서버로 요청을 보내고 데이터를 받아오는데 시간이 걸리기 때문에
    // 그동안 다른 코드가 실행될 수 있게 하기 위해서 비동기 통신을 사용.

  </script>

</body>

</html>
